{
  "rules": [
    {
      "tag_key": "Dept",
      "tag_value": "Finance",
      "nsg_rules": [
        {
          "name": "Allow-Finance-Subnet",
          "priority": 200,
          "direction": "Inbound",
          "access": "Allow",
          "protocol": "Tcp",
          "source_address_prefix": "10.10.20.0/24",
          "destination_port_range": "443",
          "destination_address_prefix": "*",
          "source_port_range": "*"
        }
      ]
    },
    {
      "tag_key": "Dept",
      "tag_value": "Engineering",
      "nsg_rules": [
        {
          "name": "Allow-Eng-SSH",
          "priority": 210,
          "direction": "Inbound",
          "access": "Allow",
          "protocol": "Tcp",
          "source_address_prefix": "10.10.30.0/24",
          "destination_port_range": "22",
          "destination_address_prefix": "*",
          "source_port_range": "*"
        }
      ]
    },
    {
      "tag_key": "DataTier",
      "tag_value": "Restricted",
      "nsg_rules": [
        {
          "name": "Deny-Public-to-Restricted-SQL",
          "priority": 100,
          "direction": "Inbound",
          "access": "Deny",
          "protocol": "*",
          "source_address_prefix": "Internet",
          "destination_port_range": "1433",
          "destination_address_prefix": "*",
          "source_port_range": "*"
        },
        {
          "name": "Allow-AppSubnet-to-SQL",
          "priority": 150,
          "direction": "Inbound",
          "access": "Allow",
          "protocol": "Tcp",
          "source_address_prefix": "10.10.50.0/24",
          "destination_port_range": "1433",
          "destination_address_prefix": "*",
          "source_port_range": "*"
        }
      ]
    }
  ]
}
